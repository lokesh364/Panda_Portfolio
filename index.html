<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panda Portfolio - Create Your Professional Portfolio</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .playfair {
            font-family: 'Playfair Display', serif;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 10px;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
            50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .animate-slide-in {
            animation: slideIn 0.4s ease-out forwards;
        }
        
        .step-hidden {
            display: none;
        }
        
        .step-active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }
        
        /* Glass morphism */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #6366f1, #8b5cf6, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Progress bar animation */
        .progress-fill {
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Input focus effects */
        .input-focus-effect:focus {
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        
        /* Card hover effects */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* Skill tag animation */
        .skill-tag {
            transition: all 0.2s ease;
        }
        .skill-tag:hover {
            transform: scale(1.05);
        }
        
        /* Toast notification */
        .toast {
            animation: slideIn 0.3s ease-out, fadeOut 0.3s ease-out 2.7s forwards;
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }
        
        /* Theme previews */
        .theme-card {
            transition: all 0.3s ease;
        }
        .theme-card:hover {
            transform: scale(1.02);
        }
        .theme-card.selected {
            ring: 4px;
            ring-color: #6366f1;
        }
        
        /* Preview iframe styling */
        .preview-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 16px;
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: #e2e8f0;
            border-radius: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .toggle-switch.active {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .toggle-switch.active::after {
            left: 26px;
        }
        
        /* Code viewer */
        .code-viewer {
            background: #1e293b;
            color: #e2e8f0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        /* Tabs */
        .tab-btn {
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: white;
            color: #6366f1;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50">
    <!-- Decorative Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float" style="animation-delay: 1s;"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-delay: 2s;"></div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Header -->
    <header class="relative z-10 py-6 px-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-paw text-white text-xl"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold gradient-text">Panda Portfolio</h1>
                    <p class="text-xs text-gray-500">Create stunning portfolios</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button id="togglePreview" class="hidden md:flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-md hover:shadow-lg transition-all text-gray-700">
                    <i class="fas fa-eye"></i>
                    <span>Live Preview</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 max-w-7xl mx-auto px-4 pb-12">
        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Form Section -->
            <div class="space-y-6">
                <!-- Progress Bar -->
                <div class="glass rounded-2xl p-6 shadow-xl">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="font-semibold text-gray-800">Your Progress</h2>
                        <span id="progressText" class="text-sm text-indigo-600 font-medium">Step 1 of 6</span>
                    </div>
                    <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                        <div id="progressBar" class="progress-fill h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full" style="width: 16.66%"></div>
                    </div>
                    <!-- Step Indicators -->
                    <div class="flex justify-between mt-4">
                        <div class="step-indicator flex flex-col items-center" data-step="1">
                            <div class="w-10 h-10 rounded-full bg-indigo-500 text-white flex items-center justify-center text-sm font-medium shadow-lg">
                                <i class="fas fa-user"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-600">Personal</span>
                        </div>
                        <div class="step-indicator flex flex-col items-center" data-step="2">
                            <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-400">Education</span>
                        </div>
                        <div class="step-indicator flex flex-col items-center" data-step="3">
                            <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-code"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-400">Skills</span>
                        </div>
                        <div class="step-indicator flex flex-col items-center" data-step="4">
                            <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-400">Projects</span>
                        </div>
                        <div class="step-indicator flex flex-col items-center" data-step="5">
                            <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-share-alt"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-400">Social</span>
                        </div>
                        <div class="step-indicator flex flex-col items-center" data-step="6">
                            <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-palette"></i>
                            </div>
                            <span class="text-xs mt-1 text-gray-400">Theme</span>
                        </div>
                    </div>
                </div>

                <!-- Form Steps Container -->
                <div class="glass rounded-2xl p-8 shadow-xl">
                    <!-- Step 1: Personal Info -->
                    <div id="step1" class="step-active">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-user text-indigo-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Personal Information</h3>
                                <p class="text-sm text-gray-500">Let's start with the basics</p>
                            </div>
                        </div>
                        
                        <div class="space-y-5">
                            <!-- Profile Photo Upload -->
                            <div class="group">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-camera mr-2 text-indigo-500"></i>Profile Photo
                                </label>
                                <div class="flex flex-col gap-3">
                                    <div class="flex gap-3 items-center">
                                        <!-- File Upload -->
                                        <label class="flex-1 cursor-pointer">
                                            <div class="flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-dashed border-indigo-300 bg-indigo-50 hover:bg-indigo-100 transition-all">
                                                <i class="fas fa-cloud-upload-alt text-indigo-500"></i>
                                                <span class="text-indigo-600 font-medium">Upload from Gallery</span>
                                            </div>
                                            <input type="file" id="photoFile" accept="image/*" class="hidden">
                                        </label>
                                        <div id="photoPreview" class="w-14 h-14 rounded-xl bg-gray-100 flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 flex-shrink-0">
                                            <i class="fas fa-user text-gray-400 text-xl"></i>
                                        </div>
                                    </div>
                                    <!-- OR Divider -->
                                    <div class="flex items-center gap-3">
                                        <div class="flex-1 h-px bg-gray-200"></div>
                                        <span class="text-xs text-gray-400 font-medium">OR</span>
                                        <div class="flex-1 h-px bg-gray-200"></div>
                                    </div>
                                    <!-- URL Input -->
                                    <input type="url" id="photoUrl" placeholder="Paste image URL here..." 
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                                </div>
                            </div>

                            <!-- Full Name -->
                            <div class="group">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-signature mr-2 text-indigo-500"></i>Full Name <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="fullName" placeholder="e.g., Panda" required
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                            </div>

                            <!-- Professional Title -->
                            <div class="group">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-id-badge mr-2 text-indigo-500"></i>Professional Title <span class="text-red-500">*</span>
                                </label>
                                <input type="text" id="title" placeholder="e.g., Full Stack Developer" required
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                            </div>

                            <!-- Bio -->
                            <div class="group">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-align-left mr-2 text-indigo-500"></i>Bio / About Me
                                </label>
                                <textarea id="bio" rows="4" placeholder="Tell us about yourself, your passion, and what drives you..."
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all resize-none"></textarea>
                                <div class="flex justify-between mt-1">
                                    <span class="text-xs text-gray-400">Markdown supported</span>
                                    <span id="bioCount" class="text-xs text-gray-400">0/500</span>
                                </div>
                            </div>

                            <!-- Email & Phone Row -->
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="group">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <i class="fas fa-envelope mr-2 text-indigo-500"></i>Email
                                    </label>
                                    <input type="email" id="email" placeholder="panda@example.com"
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                                </div>
                                <div class="group">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <i class="fas fa-phone mr-2 text-indigo-500"></i>Phone
                                    </label>
                                    <div class="flex">
                                        <span class="inline-flex items-center px-3 py-3 rounded-l-xl border border-r-0 border-gray-200 bg-gray-50 text-gray-600 text-sm">
                                            +91
                                        </span>
                                        <input type="tel" id="phone" placeholder="98765 43210"
                                            class="input-focus-effect w-full px-4 py-3 rounded-r-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                                    </div>
                                </div>
                            </div>

                            <!-- Address & Location -->
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="group">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <i class="fas fa-home mr-2 text-indigo-500"></i>Address
                                    </label>
                                    <input type="text" id="address" placeholder="e.g., Hyderabad, Telangana"
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                                </div>
                                <div class="group">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <i class="fas fa-globe-asia mr-2 text-indigo-500"></i>Country
                                    </label>
                                    <input type="text" id="country" placeholder="India" value="India"
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:outline-none transition-all">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Academic Details -->
                    <div id="step2" class="step-hidden">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-graduation-cap text-emerald-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Academic Details</h3>
                                <p class="text-sm text-gray-500">Add your educational background</p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <!-- 10th Class / SSC -->
                            <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-school text-blue-500"></i>
                                        <h4 class="font-semibold text-gray-800">10th Class (SSC)</h4>
                                    </div>
                                    <div class="toggle-switch active" data-toggle="ssc" onclick="toggleSection('ssc')"></div>
                                </div>
                                <div id="sscSection" class="space-y-4">
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">School Name</label>
                                            <input type="text" id="sscSchool" placeholder="e.g., Vidya Mega Study Circle"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Board</label>
                                            <select id="sscBoard" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none bg-white">
                                                <option value="">Select Board</option>
                                                <option value="CBSE">CBSE</option>
                                                <option value="ICSE">ICSE</option>
                                                <option value="State Board">State Board</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Percentage / CGPA</label>
                                            <input type="text" id="sscPercentage" placeholder="e.g., 92% or 9.2 CGPA"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Year of Passing</label>
                                            <input type="text" id="sscYear" placeholder="e.g., 2018"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Intermediate / 12th -->
                            <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-book-open text-purple-500"></i>
                                        <h4 class="font-semibold text-gray-800">Intermediate (12th Class)</h4>
                                    </div>
                                    <div class="toggle-switch active" data-toggle="inter" onclick="toggleSection('inter')"></div>
                                </div>
                                <div id="interSection" class="space-y-4">
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">College/School Name</label>
                                            <input type="text" id="interCollege" placeholder="e.g., Vidya Mega Study Circle"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Stream</label>
                                            <select id="interStream" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none bg-white">
                                                <option value="">Select Stream</option>
                                                <option value="MPC">MPC (Maths, Physics, Chemistry)</option>
                                                <option value="BiPC">BiPC (Biology, Physics, Chemistry)</option>
                                                <option value="Commerce">Commerce</option>
                                                <option value="Arts">Arts/Humanities</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Percentage / CGPA</label>
                                            <input type="text" id="interPercentage" placeholder="e.g., 95% or 9.5 CGPA"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Year of Passing</label>
                                            <input type="text" id="interYear" placeholder="e.g., 2020"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- B.Tech / Graduation -->
                            <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-2">
                                        <i class="fas fa-university text-orange-500"></i>
                                        <h4 class="font-semibold text-gray-800">B.Tech / Graduation</h4>
                                    </div>
                                    <div class="toggle-switch active" data-toggle="btech" onclick="toggleSection('btech')"></div>
                                </div>
                                <div id="btechSection" class="space-y-4">
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">University/College Name</label>
                                            <input type="text" id="btechCollege" placeholder="e.g., Vidya Mega Study Circle"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Degree</label>
                                            <select id="btechDegree" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none bg-white">
                                                <option value="">Select Degree</option>
                                                <option value="B.Tech">B.Tech</option>
                                                <option value="B.E.">B.E.</option>
                                                <option value="B.Sc">B.Sc</option>
                                                <option value="BCA">BCA</option>
                                                <option value="B.Com">B.Com</option>
                                                <option value="BA">BA</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Branch/Specialization</label>
                                            <input type="text" id="btechBranch" placeholder="e.g., Computer Science & Engineering"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">CGPA / Percentage</label>
                                            <input type="text" id="btechCgpa" placeholder="e.g., 8.5 CGPA or 85%"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Start Year</label>
                                            <input type="text" id="btechStartYear" placeholder="e.g., 2020"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">End Year (or Expected)</label>
                                            <input type="text" id="btechEndYear" placeholder="e.g., 2024 or Present"
                                                class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:outline-none transition-all">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <p class="text-xs text-gray-500 text-center">
                                <i class="fas fa-info-circle mr-1"></i>
                                Toggle off sections you don't want to include in your portfolio
                            </p>
                        </div>
                    </div>

                    <!-- Step 3: Skills -->
                    <div id="step3" class="step-hidden">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-code text-purple-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Skills & Expertise</h3>
                                <p class="text-sm text-gray-500">Show off what you're good at</p>
                            </div>
                        </div>

                        <div class="space-y-5">
                            <!-- Add Skill Input -->
                            <div class="group">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-plus-circle mr-2 text-purple-500"></i>Add Skills
                                </label>
                                <div class="flex gap-3">
                                    <input type="text" id="skillInput" placeholder="e.g., JavaScript, React, Python"
                                        class="input-focus-effect flex-1 px-4 py-3 rounded-xl border border-gray-200 focus:border-purple-500 focus:outline-none transition-all">
                                    <select id="skillLevel" class="px-4 py-3 rounded-xl border border-gray-200 focus:border-purple-500 focus:outline-none bg-white">
                                        <option value="Beginner">Beginner</option>
                                        <option value="Intermediate" selected>Intermediate</option>
                                        <option value="Advanced">Advanced</option>
                                        <option value="Expert">Expert</option>
                                    </select>
                                    <button id="addSkillBtn" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl hover:shadow-lg transition-all">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Skills Tags Container -->
                            <div class="bg-gray-50 rounded-xl p-4 min-h-32">
                                <p class="text-sm text-gray-500 mb-3">Your Skills:</p>
                                <div id="skillsContainer" class="flex flex-wrap gap-2">
                                    <!-- Skills will be added here -->
                                </div>
                                <p id="noSkillsMessage" class="text-sm text-gray-400 italic">No skills added yet. Start typing above!</p>
                            </div>

                            <!-- Quick Add Suggestions -->
                            <div>
                                <p class="text-sm text-gray-500 mb-2">Quick add popular skills:</p>
                                <div class="flex flex-wrap gap-2">
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">JavaScript</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">React</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">Python</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">Node.js</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">Java</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">C++</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">SQL</button>
                                    <button class="quick-skill px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-sm text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-all">Git</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Projects -->
                    <div id="step4" class="step-hidden">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-briefcase text-pink-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Projects & Work</h3>
                                <p class="text-sm text-gray-500">Showcase your best work</p>
                            </div>
                        </div>

                        <div class="space-y-5">
                            <!-- Add Project Form -->
                            <div class="bg-gray-50 rounded-xl p-5 space-y-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                                        <input type="text" id="projectName" placeholder="e.g., E-Commerce App"
                                            class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-pink-500 focus:outline-none transition-all">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Project URL</label>
                                        <input type="url" id="projectUrl" placeholder="https://project.com"
                                            class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-pink-500 focus:outline-none transition-all">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Project Image URL</label>
                                    <input type="url" id="projectImage" placeholder="https://example.com/project-image.jpg"
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-pink-500 focus:outline-none transition-all">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                                    <textarea id="projectDesc" rows="2" placeholder="Brief description of the project..."
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-pink-500 focus:outline-none transition-all resize-none"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Technologies Used</label>
                                    <input type="text" id="projectTech" placeholder="React, Node.js, MongoDB (comma separated)"
                                        class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-pink-500 focus:outline-none transition-all">
                                </div>
                                <button id="addProjectBtn" class="w-full py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-2">
                                    <i class="fas fa-plus"></i>
                                    Add Project
                                </button>
                            </div>

                            <!-- Projects List -->
                            <div>
                                <p class="text-sm text-gray-500 mb-3">Your Projects:</p>
                                <div id="projectsContainer" class="space-y-3">
                                    <!-- Projects will be added here -->
                                </div>
                                <p id="noProjectsMessage" class="text-sm text-gray-400 italic text-center py-4">No projects added yet. Add your first project above!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Step 5: Social Links -->
                    <div id="step5" class="step-hidden">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-share-alt text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Social & Links</h3>
                                <p class="text-sm text-gray-500">Connect with the world</p>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <!-- Social Links -->
                            <div class="group">
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fab fa-github text-gray-800"></i>GitHub
                                </label>
                                <input type="url" id="github" placeholder="https://github.com/panda"
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:outline-none transition-all">
                            </div>

                            <div class="group">
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fab fa-linkedin text-blue-600"></i>LinkedIn
                                </label>
                                <input type="url" id="linkedin" placeholder="https://linkedin.com/in/panda"
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:outline-none transition-all">
                            </div>

                            <div class="group">
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fab fa-twitter text-blue-400"></i>Twitter / X
                                </label>
                                <input type="url" id="twitter" placeholder="https://twitter.com/panda"
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:outline-none transition-all">
                            </div>

                            <div class="group">
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fab fa-instagram text-pink-500"></i>Instagram
                                </label>
                                <input type="url" id="instagram" placeholder="https://instagram.com/panda"
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:outline-none transition-all">
                            </div>

                            <div class="group">
                                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-globe text-green-500"></i>Personal Website
                                </label>
                                <input type="url" id="website" placeholder="https://panda.dev"
                                    class="input-focus-effect w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:outline-none transition-all">
                            </div>
                        </div>
                    </div>

                    <!-- Step 6: Theme Selection -->
                    <div id="step6" class="step-hidden">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-palette text-amber-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">Choose Your Theme</h3>
                                <p class="text-sm text-gray-500">Pick a style that represents you</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Theme 1: Modern -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-indigo-500 overflow-hidden transition-all selected" data-theme="modern">
                                <div class="h-20 bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white rounded-full"></div>
                                </div>
                                <div class="p-2 bg-white">
                                    <h4 class="font-medium text-gray-800 text-sm">Modern</h4>
                                    <p class="text-xs text-gray-500">Clean & Professional</p>
                                </div>
                            </div>

                            <!-- Theme 2: Minimal -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="minimal">
                                <div class="h-20 bg-white flex items-center justify-center border-b">
                                    <div class="w-10 h-10 bg-gray-800 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-gray-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Minimal</h4>
                                    <p class="text-xs text-gray-500">Simple & Elegant</p>
                                </div>
                            </div>

                            <!-- Theme 3: Dark -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="dark">
                                <div class="h-20 bg-gray-900 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-gray-800">
                                    <h4 class="font-medium text-white text-sm">Dark</h4>
                                    <p class="text-xs text-gray-400">Bold & Striking</p>
                                </div>
                            </div>

                            <!-- Theme 4: Creative -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="creative">
                                <div class="h-20 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/90 rounded-lg rotate-12"></div>
                                </div>
                                <div class="p-2 bg-white">
                                    <h4 class="font-medium text-gray-800 text-sm">Creative</h4>
                                    <p class="text-xs text-gray-500">Vibrant & Unique</p>
                                </div>
                            </div>

                            <!-- Theme 5: Ocean -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="ocean">
                                <div class="h-20 bg-gradient-to-br from-cyan-400 via-blue-500 to-blue-600 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/80 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-blue-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Ocean</h4>
                                    <p class="text-xs text-gray-500">Cool & Calm</p>
                                </div>
                            </div>

                            <!-- Theme 6: Sunset -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="sunset">
                                <div class="h-20 bg-gradient-to-r from-orange-400 via-red-500 to-pink-500 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/90 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-orange-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Sunset</h4>
                                    <p class="text-xs text-gray-500">Warm & Energetic</p>
                                </div>
                            </div>

                            <!-- Theme 7: Forest -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="forest">
                                <div class="h-20 bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/80 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-green-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Forest</h4>
                                    <p class="text-xs text-gray-500">Natural & Fresh</p>
                                </div>
                            </div>

                            <!-- Theme 8: Midnight -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="midnight">
                                <div class="h-20 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-gradient-to-r from-violet-400 to-fuchsia-400 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-slate-900">
                                    <h4 class="font-medium text-white text-sm">Midnight</h4>
                                    <p class="text-xs text-gray-400">Mysterious & Sleek</p>
                                </div>
                            </div>

                            <!-- Theme 9: Neon -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="neon">
                                <div class="h-20 bg-black flex items-center justify-center">
                                    <div class="w-10 h-10 bg-gradient-to-r from-green-400 to-cyan-400 rounded-full shadow-lg shadow-green-500/50"></div>
                                </div>
                                <div class="p-2 bg-gray-950">
                                    <h4 class="font-medium text-green-400 text-sm">Neon</h4>
                                    <p class="text-xs text-gray-500">Futuristic & Glowing</p>
                                </div>
                            </div>

                            <!-- Theme 10: Rose Gold -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="rosegold">
                                <div class="h-20 bg-gradient-to-br from-rose-200 via-pink-300 to-rose-400 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/90 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-rose-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Rose Gold</h4>
                                    <p class="text-xs text-gray-500">Elegant & Luxurious</p>
                                </div>
                            </div>

                            <!-- Theme 11: Lavender -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="lavender">
                                <div class="h-20 bg-gradient-to-br from-purple-200 via-violet-300 to-purple-400 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-white/90 rounded-full"></div>
                                </div>
                                <div class="p-2 bg-purple-50">
                                    <h4 class="font-medium text-gray-800 text-sm">Lavender</h4>
                                    <p class="text-xs text-gray-500">Soft & Dreamy</p>
                                </div>
                            </div>

                            <!-- Theme 12: Cyberpunk -->
                            <div class="theme-card cursor-pointer rounded-xl border-2 border-gray-200 overflow-hidden hover:border-indigo-400 transition-all" data-theme="cyberpunk">
                                <div class="h-20 bg-gradient-to-r from-fuchsia-600 via-purple-600 to-cyan-400 flex items-center justify-center">
                                    <div class="w-10 h-10 bg-yellow-400 rounded-lg rotate-45"></div>
                                </div>
                                <div class="p-2 bg-gray-900">
                                    <h4 class="font-medium text-fuchsia-400 text-sm">Cyberpunk</h4>
                                    <p class="text-xs text-gray-500">Bold & Electric</p>
                                </div>
                            </div>
                        </div>

                        <!-- Accent Color -->
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Accent Color</label>
                            <div class="flex flex-wrap gap-3">
                                <button class="color-btn w-10 h-10 rounded-full bg-indigo-500 ring-2 ring-offset-2 ring-indigo-500" data-color="#6366f1"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-purple-500 ring-offset-2" data-color="#a855f7"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-pink-500 ring-offset-2" data-color="#ec4899"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-blue-500 ring-offset-2" data-color="#3b82f6"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-teal-500 ring-offset-2" data-color="#14b8a6"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-amber-500 ring-offset-2" data-color="#f59e0b"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-rose-500 ring-offset-2" data-color="#f43f5e"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-emerald-500 ring-offset-2" data-color="#10b981"></button>
                                <button class="color-btn w-10 h-10 rounded-full bg-cyan-500 ring-offset-2" data-color="#06b6d4"></button>
                            </div>
                        </div>

                        <!-- Border Customization -->
                        <div class="mt-6 bg-gray-50 rounded-xl p-4">
                            <h4 class="font-medium text-gray-800 mb-3">
                                <i class="fas fa-border-style mr-2 text-indigo-500"></i>Border Style
                            </h4>
                            
                            <!-- Border Radius -->
                            <div class="mb-4">
                                <label class="block text-sm text-gray-600 mb-2">Border Radius</label>
                                <div class="flex gap-2">
                                    <button class="radius-btn flex-1 py-2 px-3 bg-white border-2 border-indigo-500 rounded-lg text-sm font-medium text-indigo-600" data-radius="8">Subtle</button>
                                    <button class="radius-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-radius="16">Rounded</button>
                                    <button class="radius-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-radius="24">Extra Round</button>
                                    <button class="radius-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-radius="0">Sharp</button>
                                </div>
                            </div>

                            <!-- Border Width -->
                            <div class="mb-4">
                                <label class="block text-sm text-gray-600 mb-2">Card Border</label>
                                <div class="flex gap-2">
                                    <button class="border-width-btn flex-1 py-2 px-3 bg-white border-2 border-indigo-500 rounded-lg text-sm font-medium text-indigo-600" data-border="0">None</button>
                                    <button class="border-width-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-border="1">Thin</button>
                                    <button class="border-width-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-border="2">Medium</button>
                                    <button class="border-width-btn flex-1 py-2 px-3 bg-white border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:border-indigo-400" data-border="3">Bold</button>
                                </div>
                            </div>

                            <!-- Border Color Option -->
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Use accent color for borders</span>
                                <div class="toggle-switch" data-toggle="accentBorder" onclick="toggleVisibility('accentBorder')"></div>
                            </div>
                        </div>

                        <!-- Section Visibility Controls -->
                        <div class="mt-6 bg-gray-50 rounded-xl p-4">
                            <h4 class="font-medium text-gray-800 mb-3">
                                <i class="fas fa-eye mr-2 text-indigo-500"></i>Show/Hide Sections in Portfolio
                            </h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">About Me Section</span>
                                    <div class="toggle-switch active" data-toggle="showAbout" onclick="toggleVisibility('showAbout')"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Education Section</span>
                                    <div class="toggle-switch active" data-toggle="showEducation" onclick="toggleVisibility('showEducation')"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Skills Section</span>
                                    <div class="toggle-switch active" data-toggle="showSkills" onclick="toggleVisibility('showSkills')"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Projects Section</span>
                                    <div class="toggle-switch active" data-toggle="showProjects" onclick="toggleVisibility('showProjects')"></div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600">Contact Info</span>
                                    <div class="toggle-switch active" data-toggle="showContact" onclick="toggleVisibility('showContact')"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between mt-8 pt-6 border-t border-gray-100">
                        <button id="prevBtn" class="px-6 py-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition-all flex items-center gap-2 opacity-50 cursor-not-allowed" disabled>
                            <i class="fas fa-arrow-left"></i>
                            Previous
                        </button>
                        <button id="nextBtn" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:shadow-lg transition-all flex items-center gap-2">
                            Next Step
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <button id="generateBtn" class="hidden px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:shadow-lg transition-all flex items-center gap-2">
                            <i class="fas fa-magic"></i>
                            Generate Portfolio
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div id="previewSection" class="hidden lg:block">
                <div class="sticky top-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-800 flex items-center gap-2">
                            <i class="fas fa-eye text-indigo-500"></i>
                            Live Preview
                        </h3>
                        <div class="flex items-center gap-2">
                            <button id="refreshPreview" class="p-2 bg-white rounded-lg shadow hover:shadow-md transition-all">
                                <i class="fas fa-sync-alt text-gray-600"></i>
                            </button>
                        </div>
                    </div>
                    <div class="preview-container">
                        <div class="bg-white rounded-xl overflow-hidden shadow-2xl" style="height: 600px; overflow-y: auto;">
                            <div id="previewContent" class="p-6">
                                <!-- Preview will be rendered here -->
                                <div class="text-center py-20 text-gray-400">
                                    <i class="fas fa-user-circle text-6xl mb-4"></i>
                                    <p>Start filling the form to see your portfolio preview</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Generated Portfolio Modal -->
    <div id="portfolioModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl animate-fade-in-up">
            <div class="flex items-center justify-between p-4 border-b bg-gradient-to-r from-indigo-500 to-purple-500">
                <h3 class="text-xl font-bold text-white flex items-center gap-2">
                    <i class="fas fa-check-circle"></i>
                    Your Portfolio is Ready! 
                </h3>
                <div class="flex items-center gap-2">
                    <button id="copyCodeBtn" class="px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-all flex items-center gap-2">
                        <i class="fas fa-copy"></i>
                        Copy Code
                    </button>
                    <button id="downloadBtn" class="px-4 py-2 bg-white text-indigo-600 rounded-lg hover:shadow-lg transition-all flex items-center gap-2 font-medium">
                        <i class="fas fa-download"></i>
                        Download HTML
                    </button>
                    <button id="closeModal" class="p-2 hover:bg-white/20 rounded-lg transition-all text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Tabs -->
            <div class="flex bg-gray-100 p-1 mx-4 mt-4 rounded-lg">
                <button class="tab-btn active flex-1 py-2 px-4 rounded-lg text-sm font-medium" data-tab="preview">
                    <i class="fas fa-eye mr-2"></i>Preview
                </button>
                <button class="tab-btn flex-1 py-2 px-4 rounded-lg text-sm font-medium text-gray-600" data-tab="code">
                    <i class="fas fa-code mr-2"></i>View Code
                </button>
            </div>

            <!-- Tab Content -->
            <div class="p-4 overflow-auto" style="height: calc(95vh - 160px);">
                <!-- Preview Tab -->
                <div id="previewTab" class="tab-content">
                    <iframe id="portfolioFrame" class="w-full h-full bg-white rounded-lg shadow-lg border" style="min-height: 500px;"></iframe>
                </div>
                
                <!-- Code Tab -->
                <div id="codeTab" class="tab-content hidden">
                    <div class="relative">
                        <div class="absolute top-2 right-2 z-10">
                            <button id="copyCodeBtn2" class="px-3 py-1.5 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg text-sm flex items-center gap-2 transition-all">
                                <i class="fas fa-copy"></i>
                                Copy
                            </button>
                        </div>
                        <pre id="codeViewer" class="code-viewer rounded-xl p-4 overflow-auto max-h-[60vh]"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Portfolio Data Store
        const portfolioData = {
            personal: {
                photoUrl: '',
                fullName: '',
                title: '',
                bio: '',
                email: '',
                phone: '',
                address: '',
                country: 'India'
            },
            education: {
                ssc: { enabled: true, school: '', board: '', percentage: '', year: '' },
                inter: { enabled: true, college: '', stream: '', percentage: '', year: '' },
                btech: { enabled: true, college: '', degree: '', branch: '', cgpa: '', startYear: '', endYear: '' }
            },
            skills: [],
            projects: [],
            social: {
                github: '',
                linkedin: '',
                twitter: '',
                instagram: '',
                website: ''
            },
            theme: 'modern',
            accentColor: '#6366f1',
            borderRadius: 8,
            borderWidth: 0,
            accentBorder: false,
            visibility: {
                showAbout: true,
                showEducation: true,
                showSkills: true,
                showProjects: true,
                showContact: true,
                accentBorder: false
            }
        };

        let currentStep = 1;
        const totalSteps = 6;

        // DOM Elements
        const steps = document.querySelectorAll('[id^="step"]');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const generateBtn = document.getElementById('generateBtn');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const stepIndicators = document.querySelectorAll('.step-indicator');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            updatePreview();
        });

        // Show toast notification
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            const icon = type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle';
            
            toast.className = `toast ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3`;
            toast.innerHTML = `<i class="fas ${icon}"></i><span>${message}</span>`;
            container.appendChild(toast);

            setTimeout(() => toast.remove(), 3000);
        }

        // Toggle education sections
        function toggleSection(section) {
            const toggle = document.querySelector(`[data-toggle="${section}"]`);
            const sectionDiv = document.getElementById(`${section}Section`);
            
            toggle.classList.toggle('active');
            portfolioData.education[section].enabled = toggle.classList.contains('active');
            
            if (sectionDiv) {
                sectionDiv.style.display = toggle.classList.contains('active') ? 'block' : 'none';
            }
            updatePreview();
        }

        // Toggle visibility options
        function toggleVisibility(option) {
            const toggle = document.querySelector(`[data-toggle="${option}"]`);
            toggle.classList.toggle('active');
            portfolioData.visibility[option] = toggle.classList.contains('active');
            updatePreview();
        }

        // Setup all event listeners
        function setupEventListeners() {
            // Navigation
            prevBtn.addEventListener('click', () => navigateStep(-1));
            nextBtn.addEventListener('click', () => navigateStep(1));
            generateBtn.addEventListener('click', generatePortfolio);

            // Personal Info Inputs
            document.getElementById('photoFile').addEventListener('change', handlePhotoUpload);
            document.getElementById('photoUrl').addEventListener('input', handlePhotoUrlPreview);
            document.getElementById('fullName').addEventListener('input', updatePersonalData);
            document.getElementById('title').addEventListener('input', updatePersonalData);
            document.getElementById('bio').addEventListener('input', handleBioInput);
            document.getElementById('email').addEventListener('input', updatePersonalData);
            document.getElementById('phone').addEventListener('input', updatePersonalData);
            document.getElementById('address').addEventListener('input', updatePersonalData);
            document.getElementById('country').addEventListener('input', updatePersonalData);

            // Education Inputs
            ['sscSchool', 'sscBoard', 'sscPercentage', 'sscYear'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateEducationData);
            });
            ['interCollege', 'interStream', 'interPercentage', 'interYear'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateEducationData);
            });
            ['btechCollege', 'btechDegree', 'btechBranch', 'btechCgpa', 'btechStartYear', 'btechEndYear'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateEducationData);
            });

            // Skills
            document.getElementById('addSkillBtn').addEventListener('click', addSkill);
            document.getElementById('skillInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addSkill();
            });
            document.querySelectorAll('.quick-skill').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.getElementById('skillInput').value = btn.textContent;
                    addSkill();
                });
            });

            // Projects
            document.getElementById('addProjectBtn').addEventListener('click', addProject);

            // Social Links
            ['github', 'linkedin', 'twitter', 'instagram', 'website'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateSocialData);
            });

            // Theme Selection
            document.querySelectorAll('.theme-card').forEach(card => {
                card.addEventListener('click', () => selectTheme(card));
            });

            // Accent Color
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', () => selectColor(btn));
            });

            // Border Radius
            document.querySelectorAll('.radius-btn').forEach(btn => {
                btn.addEventListener('click', () => selectRadius(btn));
            });

            // Border Width
            document.querySelectorAll('.border-width-btn').forEach(btn => {
                btn.addEventListener('click', () => selectBorderWidth(btn));
            });

            // Modal
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('downloadBtn').addEventListener('click', downloadPortfolio);
            document.getElementById('copyCodeBtn').addEventListener('click', copyCode);
            document.getElementById('copyCodeBtn2').addEventListener('click', copyCode);
            document.getElementById('portfolioModal').addEventListener('click', (e) => {
                if (e.target.id === 'portfolioModal') closeModal();
            });

            // Tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });

            // Refresh Preview
            document.getElementById('refreshPreview').addEventListener('click', updatePreview);

            // Toggle Preview on mobile
            document.getElementById('togglePreview').addEventListener('click', () => {
                const previewSection = document.getElementById('previewSection');
                previewSection.classList.toggle('hidden');
                previewSection.classList.toggle('lg:block');
            });
        }

        // Switch tabs
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tab);
                btn.classList.toggle('text-gray-600', btn.dataset.tab !== tab);
            });
            document.getElementById('previewTab').classList.toggle('hidden', tab !== 'preview');
            document.getElementById('codeTab').classList.toggle('hidden', tab !== 'code');
        }

        // Copy code to clipboard
        function copyCode() {
            if (window.generatedHTML) {
                navigator.clipboard.writeText(window.generatedHTML).then(() => {
                    showToast('Code copied to clipboard!');
                }).catch(() => {
                    showToast('Failed to copy code', 'error');
                });
            }
        }

        // Navigate between steps
        function navigateStep(direction) {
            const newStep = currentStep + direction;
            
            if (newStep < 1 || newStep > totalSteps) return;

            // Validate required fields for step 1
            if (direction === 1 && currentStep === 1) {
                const name = document.getElementById('fullName').value.trim();
                const title = document.getElementById('title').value.trim();
                if (!name || !title) {
                    showToast('Please fill in your name and title', 'error');
                    return;
                }
            }

            // Hide current step
            document.getElementById(`step${currentStep}`).classList.remove('step-active');
            document.getElementById(`step${currentStep}`).classList.add('step-hidden');

            // Update current step
            currentStep = newStep;

            // Show new step
            document.getElementById(`step${currentStep}`).classList.remove('step-hidden');
            document.getElementById(`step${currentStep}`).classList.add('step-active');

            // Update UI
            updateProgressUI();
            updatePreview();
        }

        // Update progress bar and indicators
        function updateProgressUI() {
            const progress = (currentStep / totalSteps) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `Step ${currentStep} of ${totalSteps}`;

            // Update step indicators
            stepIndicators.forEach((indicator, index) => {
                const stepNum = index + 1;
                const circle = indicator.querySelector('div');
                const label = indicator.querySelector('span');
                
                if (stepNum < currentStep) {
                    circle.className = 'w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-medium shadow-lg';
                    circle.innerHTML = '<i class="fas fa-check"></i>';
                    label.className = 'text-xs mt-1 text-green-600';
                } else if (stepNum === currentStep) {
                    circle.className = 'w-10 h-10 rounded-full bg-indigo-500 text-white flex items-center justify-center text-sm font-medium shadow-lg';
                    const icons = ['fa-user', 'fa-graduation-cap', 'fa-code', 'fa-briefcase', 'fa-share-alt', 'fa-palette'];
                    circle.innerHTML = `<i class="fas ${icons[index]}"></i>`;
                    label.className = 'text-xs mt-1 text-indigo-600 font-medium';
                } else {
                    circle.className = 'w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-medium';
                    const icons = ['fa-user', 'fa-graduation-cap', 'fa-code', 'fa-briefcase', 'fa-share-alt', 'fa-palette'];
                    circle.innerHTML = `<i class="fas ${icons[index]}"></i>`;
                    label.className = 'text-xs mt-1 text-gray-400';
                }
            });

            // Update buttons
            prevBtn.disabled = currentStep === 1;
            prevBtn.classList.toggle('opacity-50', currentStep === 1);
            prevBtn.classList.toggle('cursor-not-allowed', currentStep === 1);

            if (currentStep === totalSteps) {
                nextBtn.classList.add('hidden');
                generateBtn.classList.remove('hidden');
                generateBtn.classList.add('flex');
            } else {
                nextBtn.classList.remove('hidden');
                generateBtn.classList.add('hidden');
                generateBtn.classList.remove('flex');
            }
        }

        // Handle photo upload from gallery
        function handlePhotoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const dataUrl = event.target.result;
                    portfolioData.personal.photoUrl = dataUrl;
                    const preview = document.getElementById('photoPreview');
                    preview.innerHTML = `<img src="${dataUrl}" class="w-full h-full object-cover">`;
                    document.getElementById('photoUrl').value = ''; // Clear URL input
                    updatePreview();
                    showToast('Photo uploaded successfully!');
                };
                reader.readAsDataURL(file);
            }
        }

        // Handle photo URL preview
        function handlePhotoUrlPreview(e) {
            const url = e.target.value;
            portfolioData.personal.photoUrl = url;
            const preview = document.getElementById('photoPreview');
            
            if (url) {
                preview.innerHTML = `<img src="${url}" class="w-full h-full object-cover" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-user text-gray-400 text-xl\\'></i>'">`;
            } else {
                preview.innerHTML = '<i class="fas fa-user text-gray-400 text-xl"></i>';
            }
            updatePreview();
        }

        // Handle bio input with character count
        function handleBioInput(e) {
            const bio = e.target.value;
            portfolioData.personal.bio = bio;
            document.getElementById('bioCount').textContent = `${bio.length}/500`;
            
            if (bio.length > 500) {
                e.target.value = bio.substring(0, 500);
                portfolioData.personal.bio = e.target.value;
            }
            updatePreview();
        }

        // Update personal data
        function updatePersonalData(e) {
            const field = e.target.id;
            portfolioData.personal[field] = e.target.value;
            updatePreview();
        }

        // Update education data
        function updateEducationData(e) {
            const id = e.target.id;
            if (id.startsWith('ssc')) {
                const field = id.replace('ssc', '').toLowerCase();
                portfolioData.education.ssc[field] = e.target.value;
            } else if (id.startsWith('inter')) {
                const field = id.replace('inter', '').toLowerCase();
                portfolioData.education.inter[field] = e.target.value;
            } else if (id.startsWith('btech')) {
                const field = id.replace('btech', '').toLowerCase();
                if (field === 'startyear') portfolioData.education.btech.startYear = e.target.value;
                else if (field === 'endyear') portfolioData.education.btech.endYear = e.target.value;
                else portfolioData.education.btech[field] = e.target.value;
            }
            updatePreview();
        }

        // Add skill
        function addSkill() {
            const input = document.getElementById('skillInput');
            const level = document.getElementById('skillLevel').value;
            const skillName = input.value.trim();

            if (!skillName) {
                showToast('Please enter a skill name', 'error');
                return;
            }

            if (portfolioData.skills.some(s => s.name.toLowerCase() === skillName.toLowerCase())) {
                showToast('Skill already added', 'error');
                return;
            }

            portfolioData.skills.push({ name: skillName, level });
            input.value = '';
            renderSkills();
            updatePreview();
            showToast(`${skillName} added!`);
        }

        // Render skills
        function renderSkills() {
            const container = document.getElementById('skillsContainer');
            const noSkillsMsg = document.getElementById('noSkillsMessage');

            if (portfolioData.skills.length === 0) {
                noSkillsMsg.classList.remove('hidden');
                container.innerHTML = '';
                return;
            }

            noSkillsMsg.classList.add('hidden');
            
            const levelColors = {
                'Beginner': 'bg-blue-100 text-blue-700 border-blue-200',
                'Intermediate': 'bg-green-100 text-green-700 border-green-200',
                'Advanced': 'bg-purple-100 text-purple-700 border-purple-200',
                'Expert': 'bg-amber-100 text-amber-700 border-amber-200'
            };

            container.innerHTML = portfolioData.skills.map((skill, index) => `
                <div class="skill-tag inline-flex items-center gap-2 px-3 py-2 rounded-lg border ${levelColors[skill.level]} animate-slide-in" style="animation-delay: ${index * 50}ms">
                    <span class="font-medium">${skill.name}</span>
                    <span class="text-xs opacity-70">${skill.level}</span>
                    <button onclick="removeSkill(${index})" class="ml-1 hover:opacity-70 transition-opacity">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                </div>
            `).join('');
        }

        // Remove skill
        function removeSkill(index) {
            portfolioData.skills.splice(index, 1);
            renderSkills();
            updatePreview();
        }

        // Add project
        function addProject() {
            const name = document.getElementById('projectName').value.trim();
            const url = document.getElementById('projectUrl').value.trim();
            const image = document.getElementById('projectImage').value.trim();
            const desc = document.getElementById('projectDesc').value.trim();
            const tech = document.getElementById('projectTech').value.trim();

            if (!name) {
                showToast('Please enter a project name', 'error');
                return;
            }

            portfolioData.projects.push({
                name,
                url,
                image,
                description: desc,
                technologies: tech.split(',').map(t => t.trim()).filter(t => t)
            });

            // Clear form
            document.getElementById('projectName').value = '';
            document.getElementById('projectUrl').value = '';
            document.getElementById('projectImage').value = '';
            document.getElementById('projectDesc').value = '';
            document.getElementById('projectTech').value = '';

            renderProjects();
            updatePreview();
            showToast('Project added successfully!');
        }

        // Render projects
        function renderProjects() {
            const container = document.getElementById('projectsContainer');
            const noProjectsMsg = document.getElementById('noProjectsMessage');

            if (portfolioData.projects.length === 0) {
                noProjectsMsg.classList.remove('hidden');
                container.innerHTML = '';
                return;
            }

            noProjectsMsg.classList.add('hidden');

            container.innerHTML = portfolioData.projects.map((project, index) => `
                <div class="bg-white border border-gray-200 rounded-xl p-4 card-hover animate-slide-in" style="animation-delay: ${index * 100}ms">
                    <div class="flex items-start gap-4">
                        ${project.image ? `<img src="${project.image}" class="w-16 h-16 rounded-lg object-cover" onerror="this.style.display='none'">` : ''}
                        <div class="flex-1">
                            <div class="flex items-start justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-800">${project.name}</h4>
                                    ${project.url ? `<a href="${project.url}" target="_blank" class="text-xs text-indigo-500 hover:underline">${project.url}</a>` : ''}
                                </div>
                                <button onclick="removeProject(${index})" class="p-1 text-gray-400 hover:text-red-500 transition-colors">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                            ${project.description ? `<p class="text-sm text-gray-600 mt-2">${project.description}</p>` : ''}
                            ${project.technologies.length > 0 ? `
                                <div class="flex flex-wrap gap-1 mt-2">
                                    ${project.technologies.map(t => `<span class="text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded">${t}</span>`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Remove project
        function removeProject(index) {
            portfolioData.projects.splice(index, 1);
            renderProjects();
            updatePreview();
        }

        // Update social data
        function updateSocialData(e) {
            const field = e.target.id;
            portfolioData.social[field] = e.target.value;
            updatePreview();
        }

        // Select theme
        function selectTheme(card) {
            document.querySelectorAll('.theme-card').forEach(c => {
                c.classList.remove('selected', 'border-indigo-500');
                c.classList.add('border-gray-200');
            });
            card.classList.add('selected', 'border-indigo-500');
            card.classList.remove('border-gray-200');
            portfolioData.theme = card.dataset.theme;
            updatePreview();
        }

        // Select accent color
        function selectColor(btn) {
            document.querySelectorAll('.color-btn').forEach(b => {
                b.classList.remove('ring-2');
            });
            btn.classList.add('ring-2');
            portfolioData.accentColor = btn.dataset.color;
            updatePreview();
        }

        // Select border radius
        function selectRadius(btn) {
            document.querySelectorAll('.radius-btn').forEach(b => {
                b.classList.remove('border-indigo-500', 'border-2', 'text-indigo-600');
                b.classList.add('border-gray-200', 'border', 'text-gray-600');
            });
            btn.classList.remove('border-gray-200', 'border', 'text-gray-600');
            btn.classList.add('border-indigo-500', 'border-2', 'text-indigo-600');
            portfolioData.borderRadius = parseInt(btn.dataset.radius);
            updatePreview();
        }

        // Select border width
        function selectBorderWidth(btn) {
            document.querySelectorAll('.border-width-btn').forEach(b => {
                b.classList.remove('border-indigo-500', 'border-2', 'text-indigo-600');
                b.classList.add('border-gray-200', 'border', 'text-gray-600');
            });
            btn.classList.remove('border-gray-200', 'border', 'text-gray-600');
            btn.classList.add('border-indigo-500', 'border-2', 'text-indigo-600');
            portfolioData.borderWidth = parseInt(btn.dataset.border);
            updatePreview();
        }

        // Update live preview
        function updatePreview() {
            const preview = document.getElementById('previewContent');
            const { personal, education, skills, projects, social, theme, accentColor, visibility } = portfolioData;

            const themeStyles = {
                modern: { bg: 'bg-gradient-to-br from-indigo-50 to-purple-50', card: 'bg-white', text: 'text-gray-800' },
                minimal: { bg: 'bg-white', card: 'bg-gray-50', text: 'text-gray-900' },
                dark: { bg: 'bg-gray-900', card: 'bg-gray-800', text: 'text-white' },
                creative: { bg: 'bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-100', card: 'bg-white/80', text: 'text-gray-800' },
                ocean: { bg: 'bg-gradient-to-br from-cyan-50 to-blue-100', card: 'bg-white', text: 'text-gray-800' },
                sunset: { bg: 'bg-gradient-to-br from-orange-50 to-pink-100', card: 'bg-white', text: 'text-gray-800' },
                forest: { bg: 'bg-gradient-to-br from-green-50 to-emerald-100', card: 'bg-white', text: 'text-gray-800' },
                midnight: { bg: 'bg-slate-900', card: 'bg-slate-800', text: 'text-white' },
                neon: { bg: 'bg-black', card: 'bg-gray-900', text: 'text-green-400' },
                rosegold: { bg: 'bg-gradient-to-br from-rose-50 to-pink-100', card: 'bg-white', text: 'text-gray-800' },
                lavender: { bg: 'bg-gradient-to-br from-purple-50 to-violet-100', card: 'bg-white', text: 'text-gray-800' },
                cyberpunk: { bg: 'bg-gray-900', card: 'bg-gray-800', text: 'text-fuchsia-400' }
            };

            const style = themeStyles[theme] || themeStyles.modern;
            const isDark = theme === 'dark' || theme === 'midnight' || theme === 'neon';
            const location = [personal.address, personal.country].filter(Boolean).join(', ');

            preview.innerHTML = `
                <div class="${style.bg} min-h-full -m-6 p-6">
                    <!-- Header -->
                    <div class="text-center mb-6">
                        ${personal.photoUrl ? `
                            <img src="${personal.photoUrl}" class="w-20 h-20 rounded-full mx-auto mb-3 object-cover shadow-lg border-4 border-white" onerror="this.style.display='none'">
                        ` : `
                            <div class="w-20 h-20 rounded-full mx-auto mb-3 flex items-center justify-center" style="background: ${accentColor}">
                                <i class="fas fa-user text-2xl text-white"></i>
                            </div>
                        `}
                        <h1 class="text-xl font-bold ${style.text}">${personal.fullName || 'Your Name'}</h1>
                        <p class="text-base ${isDark ? 'text-gray-300' : 'text-gray-600'}" style="color: ${accentColor}">${personal.title || 'Your Title'}</p>
                        ${location ? `<p class="text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'} mt-1"><i class="fas fa-map-marker-alt mr-1"></i>${location}</p>` : ''}
                    </div>

                    <!-- Bio -->
                    ${visibility.showAbout && personal.bio ? `
                        <div class="${style.card} rounded-lg p-3 mb-4 shadow-sm">
                            <p class="text-xs ${isDark ? 'text-gray-300' : 'text-gray-600'}">${personal.bio}</p>
                        </div>
                    ` : ''}

                    <!-- Education -->
                    ${visibility.showEducation && (education.ssc.enabled || education.inter.enabled || education.btech.enabled) ? `
                        <div class="mb-4">
                            <h3 class="text-xs font-semibold ${style.text} mb-2"><i class="fas fa-graduation-cap mr-1" style="color: ${accentColor}"></i> Education</h3>
                            <div class="space-y-2">
                                ${education.btech.enabled && education.btech.college ? `
                                    <div class="${style.card} rounded-lg p-2 shadow-sm">
                                        <p class="text-xs font-medium ${style.text}">${education.btech.degree || 'B.Tech'} - ${education.btech.branch || 'Branch'}</p>
                                        <p class="text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}">${education.btech.college}</p>
                                    </div>
                                ` : ''}
                                ${education.inter.enabled && education.inter.college ? `
                                    <div class="${style.card} rounded-lg p-2 shadow-sm">
                                        <p class="text-xs font-medium ${style.text}">Intermediate - ${education.inter.stream || 'Stream'}</p>
                                        <p class="text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'}">${education.inter.college}</p>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    ` : ''}

                    <!-- Skills -->
                    ${visibility.showSkills && skills.length > 0 ? `
                        <div class="mb-4">
                            <h3 class="text-xs font-semibold ${style.text} mb-2">Skills</h3>
                            <div class="flex flex-wrap gap-1">
                                ${skills.slice(0, 6).map(s => `
                                    <span class="px-2 py-0.5 text-xs rounded-full text-white" style="background: ${accentColor}">${s.name}</span>
                                `).join('')}
                                ${skills.length > 6 ? `<span class="px-2 py-0.5 text-xs rounded-full bg-gray-200 text-gray-600">+${skills.length - 6}</span>` : ''}
                            </div>
                        </div>
                    ` : ''}

                    <!-- Projects -->
                    ${visibility.showProjects && projects.length > 0 ? `
                        <div class="mb-4">
                            <h3 class="text-xs font-semibold ${style.text} mb-2">Projects</h3>
                            <div class="space-y-2">
                                ${projects.slice(0, 2).map(p => `
                                    <div class="${style.card} rounded-lg p-2 shadow-sm">
                                        <h4 class="font-medium ${style.text} text-xs">${p.name}</h4>
                                        ${p.description ? `<p class="text-xs ${isDark ? 'text-gray-400' : 'text-gray-500'} mt-1">${p.description.substring(0, 60)}...</p>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}

                    <!-- Social Links -->
                    <div class="flex justify-center gap-3 mt-4">
                        ${social.github ? `<a href="${social.github}" class="${isDark ? 'text-gray-300 hover:text-white' : 'text-gray-600 hover:text-gray-900'}"><i class="fab fa-github text-lg"></i></a>` : ''}
                        ${social.linkedin ? `<a href="${social.linkedin}" class="text-blue-600 hover:text-blue-700"><i class="fab fa-linkedin text-lg"></i></a>` : ''}
                        ${social.twitter ? `<a href="${social.twitter}" class="text-blue-400 hover:text-blue-500"><i class="fab fa-twitter text-lg"></i></a>` : ''}
                        ${social.instagram ? `<a href="${social.instagram}" class="text-pink-500 hover:text-pink-600"><i class="fab fa-instagram text-lg"></i></a>` : ''}
                        ${social.website ? `<a href="${social.website}" class="text-green-500 hover:text-green-600"><i class="fas fa-globe text-lg"></i></a>` : ''}
                    </div>
                </div>
            `;
        }

        // Generate full portfolio HTML
        function generatePortfolio() {
            const { personal, education, skills, projects, social, theme, accentColor, visibility, borderRadius, borderWidth, accentBorder } = portfolioData;
            const phone = personal.phone ? `+91 ${personal.phone}` : '';
            const location = [personal.address, personal.country].filter(Boolean).join(', ');
            const borderColor = accentBorder || visibility.accentBorder ? accentColor : '#e2e8f0';
            const cardBorder = borderWidth > 0 ? `border: ${borderWidth}px solid ${borderColor};` : '';

            const themeStyles = {
                modern: {
                    body: `background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%); min-height: 100vh;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: linear-gradient(135deg, ${accentColor}, ${adjustColor(accentColor, -30)}); color: white; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.15);`,
                    card: `background: white; border-radius: 16px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);`
                },
                minimal: {
                    body: `background: #ffffff; min-height: 100vh;`,
                    container: `max-width: 700px; margin: 0 auto; padding: 60px 20px;`,
                    header: `border-bottom: 1px solid #eee; padding-bottom: 40px; margin-bottom: 40px; text-align: center;`,
                    card: `border: 1px solid #eee; border-radius: 8px; padding: 24px; margin-bottom: 16px;`
                },
                dark: {
                    body: `background: #0f172a; min-height: 100vh; color: white;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: #1e293b; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; border: 1px solid #334155;`,
                    card: `background: #1e293b; border-radius: 16px; padding: 30px; margin-bottom: 20px; border: 1px solid #334155;`
                },
                creative: {
                    body: `background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 50%, #ee9ca7 100%); min-height: 100vh;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-radius: 30px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.1);`,
                    card: `background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; margin-bottom: 20px;`
                },
                ocean: {
                    body: `background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 50%, #80deea 100%); min-height: 100vh;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: linear-gradient(135deg, #0097a7, #00838f); color: white; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(0,150,167,0.3);`,
                    card: `background: white; border-radius: 16px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,150,167,0.1);`
                },
                sunset: {
                    body: `background: linear-gradient(135deg, #fff3e0 0%, #ffccbc 50%, #ffab91 100%); min-height: 100vh;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: linear-gradient(135deg, #ff7043, #f4511e); color: white; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(244,81,30,0.3);`,
                    card: `background: white; border-radius: 16px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(244,81,30,0.1);`
                },
                forest: {
                    body: `background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 50%, #a5d6a7 100%); min-height: 100vh;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: linear-gradient(135deg, #43a047, #2e7d32); color: white; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 20px 60px rgba(46,125,50,0.3);`,
                    card: `background: white; border-radius: 16px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(46,125,50,0.1);`
                },
                midnight: {
                    body: `background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100vh; color: white;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: linear-gradient(135deg, rgba(139,92,246,0.3), rgba(236,72,153,0.3)); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px;`,
                    card: `background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 30px; margin-bottom: 20px;`
                },
                neon: {
                    body: `background: #000000; min-height: 100vh; color: #00ff88;`,
                    container: `max-width: 900px; margin: 0 auto; padding: 40px 20px;`,
                    header: `background: #0a0a0a; border: 2px solid #00ff88; border-radius: 24px; padding: 60px 40px; text-align: center; margin-bottom: 30px; box-shadow: 0 0 30px rgba(0,255,136,0.3);`,
                    card: `background: #0a0a0a; border: 1px solid #00ff88; border-radius: 16px; padding: 30px; margin-bottom: 20px; box-shadow: 0 0 15px rgba(0,255,136,0.1);`
                }
            };

            const style = themeStyles[theme];
            const isDark = theme === 'dark';
            const textColor = isDark ? '#e2e8f0' : '#1e293b';
            const subTextColor = isDark ? '#94a3b8' : '#64748b';

            // Build education HTML
            let educationHTML = '';
            if (visibility.showEducation) {
                const eduItems = [];
                
                if (education.btech.enabled && education.btech.college) {
                    eduItems.push(`
                        <div style="display: flex; align-items: start; gap: 16px; padding: 20px; background: ${isDark ? '#334155' : '#f8fafc'}; border-radius: 12px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; background: ${accentColor}; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <i class="fas fa-university" style="color: white; font-size: 1.25rem;"></i>
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-weight: 600; color: ${textColor}; margin-bottom: 4px;">${education.btech.degree || 'B.Tech'} in ${education.btech.branch || 'Engineering'}</h4>
                                <p style="color: ${subTextColor}; font-size: 0.9rem;">${education.btech.college}</p>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 0.85rem; color: ${subTextColor};">
                                    ${education.btech.cgpa ? `<span><i class="fas fa-star" style="color: ${accentColor}; margin-right: 4px;"></i>${education.btech.cgpa}</span>` : ''}
                                    ${education.btech.startYear || education.btech.endYear ? `<span><i class="fas fa-calendar" style="color: ${accentColor}; margin-right: 4px;"></i>${education.btech.startYear} - ${education.btech.endYear}</span>` : ''}
                                </div>
                            </div>
                        </div>
                    `);
                }
                
                if (education.inter.enabled && education.inter.college) {
                    eduItems.push(`
                        <div style="display: flex; align-items: start; gap: 16px; padding: 20px; background: ${isDark ? '#334155' : '#f8fafc'}; border-radius: 12px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; background: ${accentColor}; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <i class="fas fa-book-open" style="color: white; font-size: 1.25rem;"></i>
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-weight: 600; color: ${textColor}; margin-bottom: 4px;">Intermediate (12th) - ${education.inter.stream || 'Stream'}</h4>
                                <p style="color: ${subTextColor}; font-size: 0.9rem;">${education.inter.college}</p>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 0.85rem; color: ${subTextColor};">
                                    ${education.inter.percentage ? `<span><i class="fas fa-percentage" style="color: ${accentColor}; margin-right: 4px;"></i>${education.inter.percentage}</span>` : ''}
                                    ${education.inter.year ? `<span><i class="fas fa-calendar" style="color: ${accentColor}; margin-right: 4px;"></i>${education.inter.year}</span>` : ''}
                                </div>
                            </div>
                        </div>
                    `);
                }
                
                if (education.ssc.enabled && education.ssc.school) {
                    eduItems.push(`
                        <div style="display: flex; align-items: start; gap: 16px; padding: 20px; background: ${isDark ? '#334155' : '#f8fafc'}; border-radius: 12px; margin-bottom: 12px;">
                            <div style="width: 50px; height: 50px; background: ${accentColor}; border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <i class="fas fa-school" style="color: white; font-size: 1.25rem;"></i>
                            </div>
                            <div style="flex: 1;">
                                <h4 style="font-weight: 600; color: ${textColor}; margin-bottom: 4px;">10th Class (SSC) - ${education.ssc.board || 'Board'}</h4>
                                <p style="color: ${subTextColor}; font-size: 0.9rem;">${education.ssc.school}</p>
                                <div style="display: flex; gap: 16px; margin-top: 8px; font-size: 0.85rem; color: ${subTextColor};">
                                    ${education.ssc.percentage ? `<span><i class="fas fa-percentage" style="color: ${accentColor}; margin-right: 4px;"></i>${education.ssc.percentage}</span>` : ''}
                                    ${education.ssc.year ? `<span><i class="fas fa-calendar" style="color: ${accentColor}; margin-right: 4px;"></i>${education.ssc.year}</span>` : ''}
                                </div>
                            </div>
                        </div>
                    `);
                }
                
                if (eduItems.length > 0) {
                    educationHTML = `
                        <section style="${style.card}">
                            <h2 style="font-size: 1.25rem; font-weight: 700; color: ${textColor}; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-graduation-cap" style="color: ${accentColor};"></i> Education
                            </h2>
                            ${eduItems.join('')}
                        </section>
                    `;
                }
            }

            const portfolioHTML = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${personal.fullName || 'My Portfolio'} - Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { ${style.body} }
        .container { ${style.container} }
        .header { ${style.header} }
        .card { ${style.card} }
        .profile-img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 5px solid rgba(255,255,255,0.3); margin-bottom: 20px; }
        .name { font-size: 2.5rem; font-weight: 800; margin-bottom: 8px; ${theme !== 'modern' ? `color: ${textColor};` : ''} }
        .title { font-size: 1.25rem; opacity: 0.9; margin-bottom: 12px; color: ${theme === 'modern' ? 'rgba(255,255,255,0.9)' : accentColor}; }
        .location { font-size: 0.9rem; opacity: 0.8; ${theme !== 'modern' ? `color: ${subTextColor};` : ''} }
        .section-title { font-size: 1.25rem; font-weight: 700; color: ${textColor}; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
        .section-title i { color: ${accentColor}; }
        .bio { color: ${subTextColor}; line-height: 1.7; font-size: 1rem; }
        .skills-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .skill-tag { background: ${accentColor}; color: white; padding: 8px 16px; border-radius: 25px; font-size: 0.9rem; font-weight: 500; }
        .project-card { display: flex; gap: 20px; align-items: start; margin-bottom: 24px; }
        .project-img { width: 120px; height: 80px; border-radius: 12px; object-fit: cover; }
        .project-info h3 { font-size: 1.1rem; font-weight: 600; color: ${textColor}; margin-bottom: 6px; }
        .project-info p { color: ${subTextColor}; font-size: 0.9rem; line-height: 1.5; margin-bottom: 10px; }
        .project-link { color: ${accentColor}; text-decoration: none; font-size: 0.85rem; font-weight: 500; }
        .project-link:hover { text-decoration: underline; }
        .tech-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 10px; }
        .tech-tag { background: ${isDark ? '#334155' : '#f1f5f9'}; color: ${subTextColor}; padding: 4px 10px; border-radius: 6px; font-size: 0.75rem; }
        .social-links { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .social-links a { width: 50px; height: 50px; border-radius: 50%; background: ${theme === 'modern' ? 'rgba(255,255,255,0.2)' : (isDark ? '#334155' : '#f1f5f9')}; display: flex; align-items: center; justify-content: center; color: ${theme === 'modern' ? 'white' : textColor}; text-decoration: none; font-size: 1.25rem; transition: all 0.3s; }
        .social-links a:hover { background: ${accentColor}; color: white; transform: translateY(-3px); }
        .contact-info { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; margin-top: 20px; ${theme !== 'modern' ? `color: ${subTextColor};` : ''} }
        .contact-item { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; }
        .contact-item i { color: ${theme === 'modern' ? 'rgba(255,255,255,0.8)' : accentColor}; }
        .footer { text-align: center; padding: 40px 20px; color: ${subTextColor}; font-size: 0.85rem; }
        @media (max-width: 640px) {
            .project-card { flex-direction: column; }
            .project-img { width: 100%; height: 180px; }
            .name { font-size: 2rem; }
            .contact-info { flex-direction: column; align-items: center; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            ${personal.photoUrl ? `<img src="${personal.photoUrl}" alt="${personal.fullName}" class="profile-img">` : ''}
            <h1 class="name">${personal.fullName || 'Your Name'}</h1>
            <p class="title">${personal.title || 'Your Professional Title'}</p>
            ${location ? `<p class="location"><i class="fas fa-map-marker-alt"></i> ${location}</p>` : ''}
            
            ${visibility.showContact ? `
            <div class="contact-info">
                ${personal.email ? `<div class="contact-item"><i class="fas fa-envelope"></i> ${personal.email}</div>` : ''}
                ${phone ? `<div class="contact-item"><i class="fas fa-phone"></i> ${phone}</div>` : ''}
            </div>
            ` : ''}

            <div class="social-links">
                ${social.github ? `<a href="${social.github}" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>` : ''}
                ${social.linkedin ? `<a href="${social.linkedin}" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>` : ''}
                ${social.twitter ? `<a href="${social.twitter}" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a>` : ''}
                ${social.instagram ? `<a href="${social.instagram}" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>` : ''}
                ${social.website ? `<a href="${social.website}" target="_blank" title="Website"><i class="fas fa-globe"></i></a>` : ''}
            </div>
        </header>

        ${visibility.showAbout && personal.bio ? `
        <!-- About Section -->
        <section class="card">
            <h2 class="section-title"><i class="fas fa-user"></i> About Me</h2>
            <p class="bio">${personal.bio}</p>
        </section>
        ` : ''}

        ${educationHTML}

        ${visibility.showSkills && skills.length > 0 ? `
        <!-- Skills Section -->
        <section class="card">
            <h2 class="section-title"><i class="fas fa-code"></i> Skills & Expertise</h2>
            <div class="skills-grid">
                ${skills.map(s => `<span class="skill-tag">${s.name}</span>`).join('')}
            </div>
        </section>
        ` : ''}

        ${visibility.showProjects && projects.length > 0 ? `
        <!-- Projects Section -->
        <section class="card">
            <h2 class="section-title"><i class="fas fa-briefcase"></i> Featured Projects</h2>
            ${projects.map(p => `
            <div class="project-card">
                ${p.image ? `<img src="${p.image}" alt="${p.name}" class="project-img">` : ''}
                <div class="project-info">
                    <h3>${p.name}</h3>
                    ${p.description ? `<p>${p.description}</p>` : ''}
                    ${p.url ? `<a href="${p.url}" target="_blank" class="project-link"><i class="fas fa-external-link-alt"></i> View Project</a>` : ''}
                    ${p.technologies.length > 0 ? `
                    <div class="tech-tags">
                        ${p.technologies.map(t => `<span class="tech-tag">${t}</span>`).join('')}
                    </div>
                    ` : ''}
                </div>
            </div>
            `).join('')}
        </section>
        ` : ''}

        <!-- Footer -->
        <footer class="footer">
            <p> ${new Date().getFullYear()} ${personal.fullName || 'Portfolio'}. Built with  using PortfolioForge</p>
        </footer>
    </div>
</body>
</html>`;

            // Store HTML for download
            window.generatedHTML = portfolioHTML;

            // Show modal with preview
            const modal = document.getElementById('portfolioModal');
            const iframe = document.getElementById('portfolioFrame');
            const codeViewer = document.getElementById('codeViewer');
            
            modal.classList.remove('hidden');
            iframe.srcdoc = portfolioHTML;
            
            // Display code with syntax highlighting
            codeViewer.textContent = portfolioHTML;
            
            // Reset to preview tab
            switchTab('preview');
        }

        // Adjust color brightness
        function adjustColor(color, amount) {
            const hex = color.replace('#', '');
            const num = parseInt(hex, 16);
            const r = Math.min(255, Math.max(0, (num >> 16) + amount));
            const g = Math.min(255, Math.max(0, ((num >> 8) & 0x00FF) + amount));
            const b = Math.min(255, Math.max(0, (num & 0x0000FF) + amount));
            return `#${(1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1)}`;
        }

        // Close modal
        function closeModal() {
            document.getElementById('portfolioModal').classList.add('hidden');
        }

        // Download portfolio
        function downloadPortfolio() {
            if (!window.generatedHTML) return;
            
            const blob = new Blob([window.generatedHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${portfolioData.personal.fullName?.replace(/\s+/g, '_') || 'portfolio'}_portfolio.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Portfolio downloaded successfully!');
        }
    </script>
</body>
</html>
